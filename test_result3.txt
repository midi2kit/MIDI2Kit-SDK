Building for debugging...
[0/3] Write sources
[1/3] Write swift-version--58304C5D6DBC2206.txt
[3/5] Compiling MIDI2Transport MockMIDITransport.swift
[4/5] Emitting module MIDI2Transport
[5/6] Emitting module MIDI2CI
[6/7] Emitting module MIDI2PE
[7/8] Emitting module MIDI2Kit
[7/9] Write Objects.LinkFileList
[8/9] Linking MIDI2KitPackageTests
Build complete! (2.38s)
error: Exited with unexpected signal code 11
Test Suite 'All tests' started at 2026-01-10 18:01:08.094.
Test Suite 'All tests' passed at 2026-01-10 18:01:08.096.
	 Executed 0 tests, with 0 failures (0 unexpected) in 0.000 (0.002) seconds
􀟈  Test run started.
􀄵  Testing Library Version: 1501
􀄵  Target Platform: x86_64-apple-macos14.0
􀟈  Suite "Mcoded7 Tests" started.
􀟈  Suite "PEDeviceHandle Tests" started.
􀟈  Suite "MUID Tests" started.
􀟈  Suite "PETransactionManager Tests" started.
􀟈  Suite "PERequestIDManager Tests" started.
􀟈  Suite "CIMessageParser Tests" started.
􀟈  Suite "PEManager Subscribe/Notify Tests" started.
􀟈  Suite "PEChunkAssembler Tests" started.
􀟈  Suite "CIManager Tests" started.
􀟈  Suite "PEManager Tests" started.
􀟈  Suite "PEResponse Tests" started.
􀟈  Suite "SysExAssembler Tests" started.
􀟈  Suite "CoreMIDITransport Packet Order Tests" started.
􀟈  Suite "Per-Device Inflight Limiting Tests" started.
􀟈  Test "Decode invalid data returns nil" started.
􀟈  Test "Large data round-trip" started.
􀟈  Test "Encode partial group" started.
􀟈  Test "Encode all 0xFF bytes" started.
􀟈  Test "Encode 7-bit safe data unchanged" started.
􀟈  Test "Decode empty data" started.
􀟈  Test "Encoded size calculation" started.
􀟈  Test "Round-trip encoding" started.
􀟈  Test "PEDeviceHandle debugDescription" started.
􀟈  Test "Multiple transactions same resource get unique IDs" started.
􀟈  Test "Request ID released after chunk complete" started.
􀟈  Test "Encode empty data" started.
􀟈  Test "PEDeviceHandle stores MUID and destination" started.
􀟈  Test "MUID to bytes round-trip" started.
􀟈  Test "Exhaustion returns nil" started.
􀟈  Test "Encode data with MSB set" started.
􀟈  Test "MUID insufficient bytes returns nil" started.
􀟈  Test "Invalid raw value rejected" started.
􀟈  Test "MUID from byte array with offset" started.
􀟈  Test "Chunk for unknown request ID returns unknownRequestID" started.
􀟈  Test "MUID from byte array" started.
􀟈  Test "Acquire returns valid 7-bit ID" started.
􀟈  Test "Multi-chunk assembly" started.
􀟈  Test "Diagnostics shows near exhaustion warning" started.
􀟈  Test "Cancel all for device" started.
􀟈  Test "hasTransaction returns correct value" started.
􀟈  Test "Begin transaction acquires ID" started.
􀟈  Test "Request IDs can be reused after cancel" started.
􀟈  Test "MUID from bytes" started.
􀟈  Test "PEDeviceHandle is Hashable" started.
􀟈  Test "Cancel is idempotent" started.
􀟈  Test "Reserved MUID" started.
􀟈  Test "All 128 IDs can be acquired" started.
􀟈  Test "Near exhaustion warning threshold" started.
􀟈  Test "ID wraps around at 128" started.
􀟈  Test "Release multiple IDs" started.
􀟈  Test "Broadcast MUID" started.
􀟈  Test "Not near exhaustion with sufficient IDs" started.
􀟈  Test "Diagnostics output" started.
􀟈  Test "Sequential IDs are unique" started.
􀟈  Test "Transaction query returns transaction info" started.
􀟈  Test "7-bit masking on release" started.
􀟈  Test "Single chunk completes immediately" started.
􀟈  Test "Cancel releases ID" started.
􀟈  Test "Release allows reuse" started.
􀟈  Test "parseDiscoveryReply too short" started.
􀟈  Test "parseInvalidateMUID too short" started.
􀟈  Test "parseDiscoveryReply minimum payload" started.
􀟈  Test "parseNAK with truncated message" started.
􀟈  Test "IsInUse tracking" started.
􀟈  Test "Cancel unknown ID is safe" started.
􀟈  Test "parsePECapabilityReply valid" started.
􀟈  Test "Random MUID generation" started.
􀟈  Test "parseNAK with minimum payload (3 bytes)" started.
􀟈  Test "Release all" started.
􀟈  Test "parseDiscoveryReply with optional fields" started.
􀟈  Test "Transaction query returns nil for unknown ID" started.
􀟈  Test "parseNAK with 9 bytes (details but no message length)" started.
􀟈  Test "parseNotify with subscribeId and resource" started.
􀟈  Test "Available count" started.
􀟈  Test "parseInvalidateMUID broadcast" started.
􀟈  Test "Subscribe receives reply with subscribeId" started.
􀟈  Test "Notify is received through notification stream" started.
􀟈  Test "parseNAK with empty payload" started.
􀟈  Test "parseFullNotify complete message" started.
􀟈  Test "parsePEReply with truncated header" started.
􀟈  Test "parseSubscribeReply with subscribeId" started.
􀟈  Test "parseNAK with short message" started.
􀟈  Test "parseNAK with full NAK details (8 bytes)" started.
􀟈  Test "parseFullSubscribeReply complete message" started.
􀟈  Test "parseNAK with insufficient payload (2 bytes)" started.
􀟈  Test "Unsubscribe for unknown subscribeId throws error" started.
􀟈  Test "parseNAK with message length but no message (10 bytes)" started.
􀟈  Test "parsePEReply with header and data" started.
􀟈  Test "Subscribe times out when no reply" started.
􀟈  Test "Chunk after cancel returns unknownRequestID" started.
􀟈  Test "Notify for unknown subscribeId is ignored" started.
􀟈  Test "Out of order chunks" started.
􀟈  Test "parsePEReply minimum valid" started.
􀟈  Test "parseSubscribeReply without subscribeId" started.
􀟈  Test "parseNAK with partial NAK details (7 bytes)" started.
􀟈  Test "parseFullSubscribeReply wrong message type returns nil" started.
􀟈  Test "parsePECapabilityReply too short" started.
􀟈  Test "Cancel all pending" started.
􀟈  Test "Pending state tracking" started.
􀟈  Test "Active subscription is removed after successful unsubscribe" started.
􀟈  Test "parseNAK with zero-length message" started.
􀟈  Test "Multiple concurrent requests" started.
􀟈  Test "stopReceiving clears subscriptions and pending subscribe requests" started.
􀟈  Test "Unsubscribe sends correct message format" started.
􀟈  Test "Cancel all" started.
􀟈  Test "CIManager generates unique MUIDs" started.
􀟈  Test "parseInvalidateMUID valid" started.
􀟈  Test "CIManager discovers device from Discovery Reply" started.
􀟈  Test "CIManager peDeviceHandles returns all PE-capable devices" started.
􀟈  Test "Multi-chunk assembly" started.
􀟈  Test "CIManager creates PEDeviceHandle for discovered device" started.
􀟈  Test "parseNAK with long message (14-bit length)" started.
􀟈  Test "Subscribe sends correct message format" started.
􀟈  Test "Header preserved from first non-empty chunk" started.
􀟈  Test "Single chunk returns complete immediately" started.
􀟈  Test "CIManager can clear all devices" started.
􀟈  Test "parsePEReply too short" started.
􀟈  Test "isError for 4xx and 5xx status codes" started.
􀟈  Test "CIManager gets device by MUID" started.
􀟈  Test "CIManager ignores Discovery Reply after stop" started.
􀟈  Test "CIManager removes device on InvalidateMUID" started.
􀟈  Test "CIManager uses default configuration" started.
􀟈  Test "bodyString returns UTF8 string" started.
􀟈  Test "Task cancellation cancels pending request" started.
􀟈  Test "Paginated GET sends offset and limit" started.
􀟈  Test "CIManager initializes with random MUID" started.
􀟈  Test "isSuccess for 2xx status codes" started.
􀟈  Test "PEManager initializes correctly" started.
􀟈  Test "PERequest validation catches missing body" started.
􀟈  Test "PERequest validation catches invalid channel" started.
􀟈  Test "stopReceiving releases all Request IDs" started.
􀟈  Test "send(request:) works correctly" started.
􀟈  Test "GET with DeviceHandle sends correct message" started.
􀟈  Test "stopReceiving is idempotent" started.
􀟈  Test "Non-SysEx data without buffer is ignored" started.
􀟈  Test "Wrong packet order corrupts SysEx assembly" started.
􀟈  Test "Empty packet returns no messages" started.
􀟈  Test "New F0 during buffering discards incomplete message" started.
􀟈  Test "PERequest validation catches empty resource" started.
􀟈  Test "stopReceiving handles many concurrent requests safely" started.
􀟈  Test "Request IDs can be reused after stopReceiving" started.
􀟈  Test "Packet order matters for fragmented SysEx" started.
􀟈  Test "PEManager starts and stops receiving" started.
􀟈  Test "SysEx after non-SysEx data" started.
􀟈  Test "GET times out when no reply" started.
􀟈  Test "PERequest factory methods create correct requests" started.
􀟈  Test "Reset clears buffer" started.
􀟈  Test "SET sends correct message format" started.
􀟈  Test "Complete SysEx in single packet" started.
􀟈  Test "F0 before F7 in continuation discards buffer" started.
􀟈  Test "SysEx split across three packets" started.
􀟈  Test "Sequential processing preserves order" started.
􀟈  Test "SysEx split across two packets" started.
􀟈  Test "Large SysEx message assembly" started.
􀟈  Test "Multiple complete SysEx in single packet" started.
􀟈  Test "Default maxInflightPerDevice is 2" started.
􀟈  Test "Different devices have independent inflight counts" started.
􀟈  Test "Sequential processing assembles correctly" started.
􀟈  Test "MaxInflightPerDevice minimum is 1" started.
􀟈  Test "Custom maxInflightPerDevice is respected" started.
􀟈  Test "Cancel all for device clears inflight state" started.
􀟈  Test "Waiter queued when at capacity and resumed on cancel" started.
􀟈  Test "Fixed approach guarantees order" started.
􀟈  Test "Simulated packet list maintains order" started.
􀟈  Test "Diagnostics shows device states" started.
􀟈  Test "Inflight count tracks active transactions" started.
􀟈  Test "Order tracker demonstrates race condition risk" started.
